// ==UserScript==
// @name         TEST Regions Guessr Script v0.1  
// @namespace    Test scripts
// @version      0.1
// @description  Testing examples of regions of countries. 
// @author       echandler 
// @match        https://www.geoguessr.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=geoguessr.com
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    let __map = null;
    let oldReverse = null;//window.sgs.reverse;
    let polygons = [];
    let infoWindows = [];

    try {
        // Watch <head> and <body> for the Google Maps script to be added
        let scriptObserver = new MutationObserver((mutations) => {
            for (const mutation of mutations) {
                for (const node of mutation.addedNodes) {
                    if (node.tagName === "SCRIPT" && /googleapis/.test(node.src)) { //node.src.startsWith(MAPS_API_URL)) {
                        node.addEventListener("load", () => {
                            if (!google) return;
                            if (!google?.maps) return;

                            if (scriptObserver) scriptObserver.disconnect();

                            scriptObserver = undefined;

                            init();
                        });
                    }
                }
            }
        });

        scriptObserver.observe(document.head, {
            childList: true,
        });

    } catch (e) {
        alert("Something happened with the GeoGuessr Path Logger script. Reloading the page will probably fix it.");
        // Promise will not short ciruit if reject is called.
        //reject(e);
    }

    function init() {
        const oldMap = google.maps.Map;
        google.maps.Map = Object.assign(
            function (...args) {

                const res = oldMap.apply(this, args);

                this.addListener("click", (evt) => {
                    removeAll();

                    drawBoundsOnMap(evt);
                });
                __map = this;
                return res;
            },
            {
                prototype: Object.create(oldMap.prototype),
            }
        );
    }
    
    function removeAll(){

        polygons.forEach(p => p.setMap(null));
        polygons = [];

        infoWindows.forEach(p => p.setMap(null));
        infoWindows = [];

    }
    
    setInterval((arg1) => {
        // Detect if polygons need to be removed for next round.
        let correctLocation = document.querySelector('img[alt="Correct location"]');

        if (!correctLocation && arg1.endOrRound == true) {
            // Correct location was visible now it isn't. Must be a new round.
            removeAll();
            arg1.endOrRound = false;
        } else if (correctLocation)  {
            // Correct location is visible. Must be end of round screen.
            arg1.endOrRound = true;
        }

    }, 1000, {endOfRound: false});

    setTimeout(() => {

        oldReverse = window.sgs.reverse;

        window.sgs.reverse = async function (...args) {
            //            debugger;

            //  let country = await window.sgs.reverse({ lat: evt.latLng.lat(), lng: evt.latLng.lng() })
            let info = await oldReverse.apply(null, args);
             
            if (info.error){
                return info;
            }

         //   let polys = window.__customCoordinates.coordinatesObject[info.country.country_name.toUpperCase()];

         //   if (!polys) {
         //       return info;
         //   }

            // let keys = Object.keys(polys);
            // let region = null;

            // console.log(polys)

            // for (let n = 0; n < keys.length; n++) {
                // let _key = keys[n];
                // let t = await window.sgs.customReverse(args[0], { [_key]: polys[keys[n]].polygon });
                // if (t.error) continue;
                // region = t.response;
            // }

         let teys = Object.keys(window.__customCoordinates.coordinatesObject);
         let keys = null;
         let polys = null;
         let region = null;

        for (let m = 0; m < teys.length; m++){
            polys = window.__customCoordinates.coordinatesObject[teys[m]];
            keys = Object.keys(polys);

            for (let n = 0; n < keys.length; n++) {
                let _key = keys[n];
                let t = await window.sgs.customReverse(args[0], { [_key]: polys[keys[n]].polygon });
                if (t.error) continue;
                region = t.response;
            }

            if (region !== null) break;      
        }

            if (region) {
                info.country = {
                    admin_country_code: region,
                    admin_country_name: region,
                    country_code: region,
                    country_name: region,
                };

            }

            return info;

        };

    }, 500)

    async function drawBoundsOnMap(evt) {

        let country = await oldReverse({ lat: evt.latLng.lat(), lng: evt.latLng.lng() })
        let region = null;

        console.log(country);

//        let polys = window.__customCoordinates.coordinatesObject[country.country.country_name.toUpperCase()];
 //       let keys = Object.keys(polys);

//        console.log(polys)
         let teys = Object.keys(window.__customCoordinates.coordinatesObject);
         let keys = null;
         let polys = null;

        for (let m = 0; m < teys.length; m++){
            polys = window.__customCoordinates.coordinatesObject[teys[m]];
            keys = Object.keys(polys);

            for (let n = 0; n < keys.length; n++) {
                let _key = keys[n];
                let t = await window.sgs.customReverse({ lat: evt.latLng.lat(), lng: evt.latLng.lng() }, { [_key]: polys[keys[n]].polygon });
                if (t.error) continue;
                region = t.response;
            }

            if (region !== null) break;      
        }
        
        if (region === null){
            keys = [];
        }

        keys.forEach(k => {

            let polyss = makePoly(polys[k].polygon);
            polyss.forEach(poly =>{
                let obj = {
                    paths: poly,// window._customCoordinates.coordinatesObject["Los Angeles"][0],
                    strokeColor: "#FF0000",
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    //fillColor: "#FF0000",
                    fillOpacity: 0,
                    clickable: false,

                }
                if (polys[k].color){
                    obj.strokeColor = polys[k].color;
                    obj.fillColor = polys[k].color;
                    obj.fillOpacity = 0.2;
                }
                const bermudaTriangle = new google.maps.Polygon(obj);

                bermudaTriangle.setMap(__map);

                polygons.push(bermudaTriangle);
            });

            if (k === region) {
                let infoWindow = new google.maps.InfoWindow({
                    content: `<span style="color: black; font-size: 1.3em;"> ${polys[k].contributer ? `${region} + <br> ${polys[k].contributer}` : region}</span>`,
                    position: evt.latLng,
                });

                infoWindow.setMap(__map);

                infoWindows.push(infoWindow);
            }


        });
    }

    function makePoly(coords) {
        let ret = [];
        coords.forEach((_c) => {
            let p = [];
            _c.forEach(c => {
                p.push({ lat: c[1], lng: c[0] });
            });
            ret.push(p);
        });
        return ret;
    }

    window.__customCoordinates = {
        keys: ["state", "SomeKey"], // You need to know what keys in the response to override.
        customError: "!!!!!!!!!!!!!!!!!!!!!!",
        coordinatesObject: {
            "EUROPE": {
                
                "Northern Europe": {
                    polygon: [
                        /*Norway,Findland and Sweden*/[[27.82443,60.459547],[31.630127,62.85526],[30.105242,63.771899],[29.298854,66.595079],[28.943448,66.990007],[30.082183,67.64755],[28.408418,68.57801],[29.021731,69.045014],[31.0862,69.736414],[28.77859,70.088842],[31.228301,70.336913],[28.76175,70.924774],[25.855747,71.271239],[22.302776,70.819472],[21.141526,70.354645],[18.661915,70.179188],[14.720038,68.994684],[12.727126,67.977133],[15.597858,68.278763],[12.37502,66.174517],[9.503745,63.763088],[5.269623,62.428038],[4.734593,60.136592],[5.345984,58.516374],[7.277656,57.794292],[10.70443,59.069302],[12.637543,56.194144],[10.396092,55.698473],[10.989234,56.481223],[10.431663,56.747008],[10.709052,57.296946],[10.472816,57.791761],[9.503258,57.391161],[7.940438,56.938217],[8.091485,55.484063],[8.452653,54.938623],[9.224097,54.845398],[9.512143,54.865923],[10.745013,54.734488],[12.031614,54.573197],[12.587024,55.263404],[14.216047,55.348797],[14.722942,55.979781],[15.877268,56.028395],[17.640954,58.641761],[19.62143,59.680624],[17.579442,60.665439],[17.876807,62.536047],[21.145607,63.936123],[22.120827,65.482303],[23.794961,65.775907],[25.203316,65.286205],[20.853783,62.89827],[21.315736,60.585378],[22.77718,59.741192],[26.655618,60.320426]],
                        /*Estonia, Latvia and Lithuania*/[[27.864935,59.426945],[28.036627,59.468829],[28.186346,59.359822],[27.672797,58.982602],[27.335028,58.772499],[27.781378,57.928003],[27.323401,57.498145],[27.835127,57.348413],[28.127127,56.160111],[27.474303,55.820216],[26.686465,55.673935],[26.512272,55.339035],[26.820684,55.295811],[25.788366,54.833676],[25.755606,54.524162],[25.058073,54.176061],[24.357745,53.871554],[23.502209,53.964784],[22.854715,54.396871],[22.706749,55.041574],[21.160598,55.272566],[20.761058,56.531345],[21.65992,57.601598],[22.625709,57.775423],[23.32833,57.082274],[23.767531,56.983034],[24.338694,57.196133],[24.272713,57.832497],[24.54734,58.308506],[24.36605,58.354432],[24.11061,58.23307],[23.730204,58.305241],[23.463097,58.685557],[23.428421,59.224487],[24.575633,59.552101],[25.6789,59.666379]],
                        /*Iceland*/[[-14.761705,66.467147],[-15.459095,66.2489],[-15.914786,66.550028],[-16.606442,66.510324],[-16.589479,66.217085],[-17.295109,66.220243],[-17.548421,66.025368],[-17.999487,66.18636],[-18.989509,66.232258],[-19.658709,65.892826],[-19.910428,66.151113],[-20.411935,66.121806],[-20.408071,65.832914],[-21.195222,65.49521],[-21.289628,66.016802],[-22.357347,66.473726],[-22.998643,66.484687],[-23.188972,66.35194],[-23.115628,66.191891],[-23.474313,66.234403],[-23.818147,66.088709],[-24.571733,65.504891],[-22.271119,65.365018],[-24.167283,64.862838],[-23.965059,64.726572],[-22.567559,64.752064],[-22.000646,64.125033],[-22.861955,64.008371],[-22.802552,63.804817],[-21.146875,63.833597],[-20.26024,63.472489],[-18.389756,63.329838],[-17.488176,63.686357],[-16.366868,63.855088],[-13.850297,64.556596],[-13.424401,65.076368],[-13.459932,65.549834],[-14.248025,65.842329],[-14.81236,66.194386],[-14.453843,66.410056]],
                    ], 
                    color: "blue",
                },
                "Southern Europe": {
                    polygon: [
                        /*Portugal and Spain*/[[-1.911531,43.448431],[-1.397859,43.256704],[-1.448641,43.056344],[3.224699,42.40267],[3.200041,41.783087],[0.298308,40.274809],[-0.179933,39.558587],[-0.174776,39.091165],[0.346739,38.774962],[-0.385309,38.28724],[-0.963548,37.517894],[-1.335066,37.471041],[-2.168009,36.670069],[-4.407202,36.649138],[-5.612699,35.96036],[-6.105584,36.174394],[-6.549781,36.960144],[-7.01595,37.16223],[-7.858898,36.97115],[-9.053409,36.972933],[-8.805712,38.316068],[-9.527811,38.738952],[-8.801964,40.672597],[-8.911077,41.868217],[-9.283863,43.194256],[-7.764816,43.825307],[-7.137128,43.575908],[-5.740397,43.723768],[-4.770666,43.47873],[-2.746248,43.488298]],
                        /*Itally*/[[7.557735,43.772261],[7.726665,44.102061],[7.217869,44.17179],[6.906826,44.44572],[7.002987,44.831698],[6.80801,44.865775],[6.737987,44.999453],[6.629513,45.105687],[7.113319,45.221299],[7.196124,45.394567],[7.009765,45.524989],[6.999186,45.639748],[6.835207,45.715354],[6.825037,45.813835],[7.029916,45.884233],[7.276143,45.875053],[7.588288,45.965236],[7.861015,45.923981],[8.160909,46.148195],[8.129582,46.271354],[8.427845,46.462388],[8.489303,46.244738],[8.693584,46.087212],[8.821131,46.088343],[8.794868,45.994149],[8.907308,45.910306],[8.915378,45.833992],[9.030056,45.811742],[9.091941,45.895404],[9.024736,45.957942],[9.027656,46.029438],[9.291675,46.316515],[9.272796,46.45281],[9.274343,46.492474],[9.363781,46.501868],[9.406568,46.461664],[9.460341,46.497112],[9.463518,46.367414],[9.546776,46.300981],[9.680332,46.28568],[9.796796,46.345747],[9.951713,46.375436],[9.994019,46.27807],[10.075597,46.221721],[10.151682,46.222351],[10.181363,46.257167],[10.11106,46.327697],[10.174785,46.434905],[10.079209,46.424648],[10.053428,46.452385],[10.055112,46.544374],[10.124399,46.605373],[10.221152,46.624822],[10.307541,46.53915],[10.470835,46.536537],[10.495297,46.614387],[10.408652,46.647614],[10.42026,46.730152],[10.481308,46.853901],[10.555335,46.837929],[10.6788,46.863284],[10.74995,46.831341],[10.738441,46.786209],[10.863737,46.763605],[11.015454,46.771068],[11.110147,46.917475],[11.25637,46.974602],[11.408087,46.964232],[11.625721,47.002581],[11.749972,46.965982],[11.955838,47.036911],[12.227621,47.092789],[12.212451,47.030922],[12.120376,46.99147],[12.212322,46.878819],[12.299494,46.858101],[12.287789,46.784742],[12.565066,46.650796],[13.67181,46.531636],[13.68761,46.451036],[13.373821,46.317226],[13.422581,46.209705],[13.677673,46.167279],[13.489363,46.018413],[13.524297,45.961015],[13.635147,45.98003],[13.573596,45.847203],[13.599936,45.802206],[13.78614,45.74137],[13.917413,45.638236],[13.839945,45.588755],[13.735293,45.608208],[13.636276,45.759911],[12.666662,45.501646],[12.27383,45.404406],[12.365856,45.073207],[12.278789,44.631536],[12.587229,44.107644],[13.731455,43.49378],[14.108284,42.668629],[15.301395,41.907361],[16.193476,41.896421],[15.978128,41.530031],[17.986397,40.691106],[18.575199,40.082723],[18.372986,39.765061],[17.04141,40.463655],[16.4745,39.68667],[17.244637,39.42318],[17.201239,38.881739],[16.734457,38.857033],[16.57797,38.406949],[16.091894,37.902049],[15.44933,37.937685],[15.128048,37.355349],[15.41577,37.042622],[15.176148,36.658126],[14.409182,36.713313],[14.234439,37.039639],[12.389775,37.660863],[12.505678,38.132887],[13.200837,38.307441],[13.746171,37.997391],[15.501992,38.274394],[16.203125,38.824761],[15.681822,39.865061],[12.597684,41.409147],[10.451367,42.984843],[10.09232,43.93225],[8.715286,44.416081],[8.151241,43.859462]],
                       /*Greece*/ [[20.002523,39.68573],[20.237417,39.644502],[20.39801,39.794564],[20.404794,40.032682],[20.665556,40.083266],[21.044256,40.569313],[20.988668,40.852975],[21.768018,40.918903],[22.052984,41.142151],[22.738271,41.153526],[22.780859,41.321854],[22.944295,41.345571],[23.199743,41.324948],[24.53185,41.551441],[24.80927,41.349695],[24.926008,41.392979],[25.275514,41.237228],[26.087474,41.336807],[26.183348,41.423493],[26.174851,41.555295],[26.084868,41.736181],[26.357434,41.703653],[26.589456,41.609802],[26.597568,41.339256],[26.33926,41.257814],[26.330956,40.943771],[26.005135,40.718878],[25.952088,40.822656],[24.833366,40.859832],[24.260353,40.788716],[23.858489,40.582301],[24.454067,40.152151],[24.309077,40.111436],[23.878442,40.272173],[23.994956,39.938623],[23.495589,40.195881],[23.778743,39.895623],[23.655402,39.872852],[22.777518,40.49559],[22.610487,40.08789],[23.388281,39.160018],[23.499773,38.841333],[24.182554,38.624285],[24.293232,38.209706],[24.606749,38.183099],[24.579691,37.983502],[24.152108,37.955039],[24.032142,37.657429],[23.67597,37.711453],[23.561497,37.434674],[23.180511,37.241236],[22.748128,37.535485],[23.271555,36.471352],[23.036926,36.07907],[22.727351,36.715588],[22.395803,36.424235],[22.113693,36.961425],[21.829816,36.69312],[21.655802,36.759072],[21.574982,37.402914],[21.078639,37.857352],[21.363304,38.221757],[21.108314,38.288325],[20.965713,38.484093],[20.740714,38.522636],[20.758506,38.290252],[20.824393,38.043571],[20.698046,37.937983],[20.945235,37.819226],[21.000159,37.637709],[20.681548,37.660415],[20.585414,37.923519],[20.691155,37.942171],[20.811317,38.042402],[20.539062,38.093546],[20.329978,38.168412],[20.373892,38.339371],[20.697958,38.52497],[20.505636,38.562625],[20.664816,38.937599],[20.219747,39.454957]],
                    ], 
                    color: "yellow",
                },
                "Western Europe": {
                    polygon: [
                        [[-1.625977,43.675818],[-1.326041,45.233427],[-1.773175,46.143904],[-3.062952,47.476802],[-4.631764,47.939272],[-4.912942,48.649094],[-3.032046,48.920962],[-1.72244,48.758683],[-2.047563,49.756139],[-0.30279,49.430189],[1.272721,50.105104],[1.529873,50.909395],[3.177309,51.395612],[4.341347,52.281825],[4.560047,52.929754],[5.568736,53.392354],[8.552911,53.967957],[8.452653,54.938623],[9.224097,54.845398],[9.512143,54.865923],[10.151751,54.696411],[10.405637,54.471176],[11.194207,54.414672],[11.059924,54.07544],[13.379563,54.628178],[14.292951,53.743158],[14.487589,53.258468],[14.154884,52.861183],[14.635167,52.547165],[14.497448,52.372135],[14.689319,52.020977],[14.611636,51.815707],[14.984392,51.42491],[14.956537,51.093896],[14.774873,50.843815],[14.362147,51.069809],[14.337059,50.895709],[13.493469,50.705479],[12.979468,50.430568],[12.588675,50.425018],[12.114705,50.217486],[12.556535,49.897108],[12.427077,49.745268],[12.661725,49.435748],[12.824962,49.343062],[12.949839,49.342308],[13.17158,49.155468],[13.294443,49.11196],[13.454385,48.957624],[13.572809,48.97231],[13.729684,48.875118],[13.840828,48.771282],[14.071172,48.666749],[14.009189,48.632556],[14.09669,48.592224],[14.343493,48.55913],[14.463953,48.644113],[14.547676,48.611162],[14.609425,48.61815],[14.694472,48.581273],[14.730128,48.68537],[14.800142,48.728279],[14.831703,48.782012],[14.957997,48.762732],[15.018374,49.003578],[15.144007,48.992238],[15.176256,48.944831],[15.295686,48.98705],[15.891602,48.844147],[16.113983,48.751566],[16.389968,48.734204],[16.462707,48.807362],[16.902067,48.713807],[16.95146,48.539828],[16.860811,48.460736],[16.849813,48.394288],[16.957267,48.262161],[16.974084,48.17367],[17.056819,48.138208],[17.085827,48.025036],[17.161527,48.007256],[17.108521,47.970133],[17.085728,47.886958],[17.015421,47.86229],[17.078056,47.707677],[16.874884,47.68639],[16.868723,47.723119],[16.82411,47.684065],[16.748616,47.678042],[16.7213,47.733435],[16.545669,47.750926],[16.44412,47.659869],[16.655682,47.613111],[16.447241,47.410789],[16.511012,47.007552],[16.298988,46.994384],[16.114431,46.864909],[15.984804,46.829161],[16.036453,46.6616],[15.864617,46.727084],[15.599185,46.680353],[15.498547,46.618493],[15.334739,46.654683],[14.934724,46.626755],[14.77782,46.504997],[14.609929,46.443561],[14.564588,46.375541],[14.534329,46.417525],[14.093456,46.484067],[13.592159,46.542972],[12.565066,46.650796],[12.287789,46.784742],[12.299494,46.858101],[12.212322,46.878819],[12.120376,46.99147],[12.212451,47.030922],[12.227621,47.092789],[11.955838,47.036911],[11.749972,46.965982],[11.625721,47.002581],[11.408087,46.964232],[11.25637,46.974602],[11.110147,46.917475],[11.015454,46.771068],[10.863737,46.763605],[10.738441,46.786209],[10.74995,46.831341],[10.6788,46.863284],[10.555335,46.837929],[10.481308,46.853901],[10.42026,46.730152],[10.408652,46.647614],[10.495297,46.614387],[10.470835,46.536537],[10.307541,46.53915],[10.221152,46.624822],[10.124399,46.605373],[10.055112,46.544374],[10.053428,46.452385],[10.079209,46.424648],[10.174785,46.434905],[10.11106,46.327697],[10.181363,46.257167],[10.151682,46.222351],[10.075597,46.221721],[9.994019,46.27807],[9.951713,46.375436],[9.796796,46.345747],[9.680332,46.28568],[9.546776,46.300981],[9.463518,46.367414],[9.460341,46.497112],[9.406568,46.461664],[9.363781,46.501868],[9.274343,46.492474],[9.272796,46.45281],[9.291675,46.316515],[9.027656,46.029438],[9.024736,45.957942],[9.091941,45.895404],[9.030056,45.811742],[8.915378,45.833992],[8.907308,45.910306],[8.794868,45.994149],[8.821131,46.088343],[8.693584,46.087212],[8.489303,46.244738],[8.427845,46.462388],[8.129582,46.271354],[8.160909,46.148195],[7.861015,45.923981],[7.588288,45.965236],[7.276143,45.875053],[7.029916,45.884233],[6.825037,45.813835],[6.835207,45.715354],[6.999186,45.639748],[7.009765,45.524989],[7.196124,45.394567],[7.113319,45.221299],[6.629513,45.105687],[6.737987,44.999453],[6.80801,44.865775],[7.002987,44.831698],[6.906826,44.44572],[7.217869,44.17179],[7.726665,44.102061],[7.515857,43.846341],[7.557735,43.772261],[7.118336,43.498365],[6.733868,43.19119],[6.206631,42.927151],[4.091871,43.416755],[3.515196,43.13766],[3.191529,42.867913],[3.224699,42.40267],[-1.448641,43.056344],[-1.397859,43.256704],[-1.911531,43.448431]],
                        [[-1.817405,50.401914],[-0.833526,50.690329],[0.326134,50.699463],[1.502877,51.078038],[1.03167,51.549286],[1.878823,52.526628],[1.571809,52.868264],[0.517724,53.233541],[-0.491813,54.545349],[-2.512092,56.233776],[-1.675925,57.686867],[-3.703574,57.807058],[-2.882682,58.423619],[-2.186591,59.394391],[-1.386348,59.832192],[-0.717941,60.089471],[-0.74343,61.069219],[-1.980064,60.171885],[-1.464477,60.070292],[-1.481342,59.837712],[-2.26431,59.451065],[-2.959388,59.397188],[-3.784904,58.957413],[-4.028144,58.706521],[-4.984725,58.649052],[-5.773187,57.900861],[-6.297977,58.58594],[-7.21572,58.292499],[-7.214515,57.88818],[-7.608817,57.585422],[-7.525214,57.155204],[-7.760215,56.731978],[-6.696082,57.028367],[-7.027213,56.470422],[-6.519866,56.360652],[-6.495918,56.177251],[-6.324449,56.015526],[-6.60342,55.711025],[-6.359359,55.5884],[-5.879092,55.574234],[-5.893211,55.291984],[-5.603416,55.285728],[-4.794644,55.430586],[-5.260286,54.967824],[-4.917155,54.596498],[-3.593688,54.804607],[-3.720802,54.528617],[-3.238944,53.996836],[-3.285972,53.445908],[-4.725852,53.416453],[-5.380882,51.662722],[-4.641013,51.120295],[-5.856712,49.953389],[-2.245628,50.303775]],
                        /*Ireland*/[[-9.03818,51.442005],[-9.432528,51.380708],[-10.288302,51.51118],[-10.604586,52.150114],[-10.028658,52.527482],[-9.360201,53.167338],[-10.308443,53.422609],[-9.971285,53.767366],[-10.249361,54.276433],[-9.808871,54.360939],[-8.797091,54.317306],[-8.345614,54.54218],[-8.921877,54.628724],[-8.377535,55.144331],[-7.34067,55.436788],[-6.891573,55.283791],[-6.024996,55.224306],[-5.290255,54.436487],[-6.125887,53.862228],[-5.901003,52.894801],[-6.304919,52.140634],[-7.199015,52.036634],[-8.752291,51.483074]],
                    ], 
                    color: "green",
                },
                "Central & Eastern Europe": {
                    polygon: [
                      [[57.501984,68.872487],[57.138244,68.702976],[54.137786,68.338344],[54.201323,68.893968],[53.097927,68.915427],[48.832851,67.771172],[47.772372,67.54446],[47.415019,66.905339],[46.093764,66.857273],[45.124072,67.525267],[47.051875,67.832838],[45.886133,68.514339],[43.156761,68.640445],[43.586689,66.490598],[42.243976,66.533131],[39.639025,65.628355],[40.020503,64.74888],[37.150027,65.12683],[36.323008,64.816416],[37.781145,63.967541],[37.193228,63.862991],[35.11117,64.373036],[34.619457,65.257379],[35.094542,65.790727],[33.583773,66.616735],[37.835184,66.019786],[40.240892,66.3424],[41.602006,67.084409],[40.500992,67.948582],[36.244141,69.213677],[32.21286,69.824195],[30.566314,70.026553],[31.228301,70.336913],[28.77859,70.088842],[31.0862,69.736414],[29.021731,69.045014],[28.408418,68.57801],[30.082183,67.64755],[28.943448,66.990007],[29.298854,66.595079],[30.105242,63.771899],[31.630127,62.85526],[27.82443,60.459547],[27.955572,59.730126],[28.036627,59.468829],[28.186346,59.359822],[27.672797,58.982602],[27.335028,58.772499],[27.781378,57.928003],[27.323401,57.498145],[27.835127,57.348413],[28.127127,56.160111],[27.474303,55.820216],[26.686465,55.673935],[26.512272,55.339035],[26.820684,55.295811],[25.788366,54.833676],[25.755606,54.524162],[25.058073,54.176061],[24.357745,53.871554],[23.502209,53.964784],[22.854715,54.396871],[22.706749,55.041574],[21.160598,55.272566],[19.928523,55.017568],[19.532213,54.518106],[18.762367,54.398001],[18.132935,54.917672],[16.06969,54.348487],[14.224749,53.937682],[14.292951,53.743158],[14.487589,53.258468],[14.154884,52.861183],[14.635167,52.547165],[14.497448,52.372135],[14.689319,52.020977],[14.611636,51.815707],[14.984392,51.42491],[14.956537,51.093896],[14.774873,50.843815],[14.362147,51.069809],[14.337059,50.895709],[13.493469,50.705479],[12.979468,50.430568],[12.588675,50.425018],[12.114705,50.217486],[12.556535,49.897108],[12.427077,49.745268],[12.661725,49.435748],[12.824962,49.343062],[12.949839,49.342308],[13.17158,49.155468],[13.294443,49.11196],[13.454385,48.957624],[13.572809,48.97231],[13.729684,48.875118],[13.840828,48.771282],[14.071172,48.666749],[14.009189,48.632556],[14.09669,48.592224],[14.343493,48.55913],[14.463953,48.644113],[14.547676,48.611162],[14.609425,48.61815],[14.694472,48.581273],[14.730128,48.68537],[14.800142,48.728279],[14.831703,48.782012],[14.957997,48.762732],[15.018374,49.003578],[15.144007,48.992238],[15.176256,48.944831],[15.295686,48.98705],[15.891602,48.844147],[16.113983,48.751566],[16.389968,48.734204],[16.462707,48.807362],[16.902067,48.713807],[16.95146,48.539828],[16.860811,48.460736],[16.849813,48.394288],[16.957267,48.262161],[16.974084,48.17367],[17.056819,48.138208],[17.085827,48.025036],[17.161527,48.007256],[17.108521,47.970133],[17.085728,47.886958],[17.015421,47.86229],[17.078056,47.707677],[16.874884,47.68639],[16.868723,47.723119],[16.82411,47.684065],[16.748616,47.678042],[16.7213,47.733435],[16.545669,47.750926],[16.44412,47.659869],[16.655682,47.613111],[16.447241,47.410789],[16.511012,47.007552],[16.298988,46.994384],[16.114431,46.864909],[15.984804,46.829161],[16.036453,46.6616],[15.864617,46.727084],[15.599185,46.680353],[15.498547,46.618493],[15.334739,46.654683],[14.934724,46.626755],[14.77782,46.504997],[14.609929,46.443561],[14.564588,46.375541],[14.534329,46.417525],[14.093456,46.484067],[13.67181,46.531636],[13.68761,46.451036],[13.373821,46.317226],[13.422581,46.209705],[13.677673,46.167279],[13.489363,46.018413],[13.524297,45.961015],[13.635147,45.98003],[13.573596,45.847203],[13.599936,45.802206],[13.78614,45.74137],[13.917413,45.638236],[13.839945,45.588755],[13.735293,45.608208],[13.471551,45.49864],[13.570393,45.095845],[13.828554,44.788209],[14.055489,44.740646],[15.216263,43.803789],[15.999723,43.396485],[16.061517,43.000928],[17.353779,42.760299],[18.093294,42.595166],[19.17167,41.910285],[19.474652,41.716949],[19.263594,40.676993],[19.267928,40.364625],[19.846877,39.997813],[19.975387,39.713583],[20.002523,39.68573],[20.237417,39.644502],[20.39801,39.794564],[20.404794,40.032682],[20.665556,40.083266],[21.044256,40.569313],[20.988668,40.852975],[21.768018,40.918903],[22.052984,41.142151],[22.738271,41.153526],[22.780859,41.321854],[22.944295,41.345571],[23.199743,41.324948],[24.53185,41.551441],[24.80927,41.349695],[24.926008,41.392979],[25.275514,41.237228],[26.087474,41.336807],[26.183348,41.423493],[26.174851,41.555295],[26.084868,41.736181],[26.357434,41.703653],[26.571359,41.968151],[27.218102,42.099352],[28.084572,41.985765],[27.709586,42.523089],[28.192259,43.279879],[28.696905,43.487789],[28.828135,44.459297],[29.640518,44.81016],[29.772051,45.518459],[30.980244,46.581618],[31.573203,46.463994],[32.171882,46.092762],[33.385796,45.963928],[32.407861,45.320428],[33.489409,45.005771],[33.362461,44.501621],[33.89958,44.350664],[35.545106,44.933169],[37.036824,44.96831],[41.33862,42.678324],[41.68776,41.828728],[41.465611,41.545836],[42.063169,41.469785],[42.726645,41.55827],[43.460336,41.150159],[43.851058,40.0409],[44.412774,39.990831],[45.448317,39.00832],[46.50866,38.873284],[48.036083,39.726786],[48.26712,39.178738],[48.014759,38.849192],[48.6636,38.426892],[48.982852,38.450893],[49.10435,39.074438],[49.681456,40.177786],[50.390398,40.298507],[50.011694,40.686133],[49.67952,40.637774],[47.56756,43.013116],[47.905552,43.947361],[47.041833,44.487494],[47.738172,45.425048],[48.779289,45.572878],[49.490816,46.148202],[46.437913,48.614185],[47.636071,50.563776],[48.440981,49.736254],[48.535819,50.700854],[50.652142,51.754957],[52.775977,51.636548],[55.37598,50.861604],[58.151765,51.078191],[59.748256,50.596774],[61.432638,50.726391],[61.337235,51.283665],[59.923472,51.94275],[58.993108,52.51213],[59.298847,54.479875],[57.82574,54.214616],[57.31943,54.868351],[55.505747,56.348637],[57.119798,58.192985],[56.888146,59.503241],[59.379061,61.825391],[59.58482,64.707141],[64.229056,66.378724],[68.462794,68.347262],[65.17439,69.303139],[61.179114,70.037639],[59.04964,70.513071],[57.453562,70.852875],[56.033265,71.607518],[56.356733,72.85105],[61.573983,75.143033],[68.84442,76.42643],[69.263882,76.876298],[67.661859,77.097394],[64.697532,76.509021],[61.469533,76.378656],[55.764568,75.252599],[52.089013,72.902988],[51.681263,71.105594],[56.930216,70.42534],[57.694234,70.667037],[58.647532,70.458754],[58.421056,70.071149],[60.131548,69.59299],[60.37156,68.927291],[59.480824,68.360971],[59.387018,68.957524],[58.326416,69.072488]], 
                    ], 
                    color: "red",
                },
            },
            "MEXICO": {

                "Baja California": {
                    polygon: [[[-117.11153, 32.510143], [-114.75484, 32.709114], [-114.984149, 32.314213], [-114.839923, 31.525088], [-109.356342, 23.22788], [-109.965381, 22.764569], [-112.324344, 24.71637], [-112.218425, 25.859167], [-115.410939, 27.768679], [-115.747009, 29.721621], [-117.320026, 32.371065]]],
                },
                "Northern Mexico": {
                    contributer: "If you contributed, your name can be associated with your contribution.",
                    polygon: [[[-114.809772, 32.505511], [-114.984149, 32.314213], [-114.839923, 31.525088], [-113.331699, 31.188226], [-112.394763, 28.945463], [-105.755924, 22.508217], [-105.369854, 23.050613], [-104.506652, 22.369306], [-103.769001, 24.032277], [-103.345244, 24.436475], [-102.479679, 24.433208], [-102.61387, 25.078429], [-101.838551, 24.997271], [-100.777587, 24.496874], [-100.545305, 24.116017], [-100.488804, 23.220106], [-100.119193, 23.234862], [-100.057199, 22.754091], [-98.682338, 22.401187], [-98.231114, 22.447962], [-97.845808, 22.220389], [-97.157518, 25.92366], [-99.105947, 26.370181], [-99.531125, 27.414198], [-101.348277, 29.701958], [-102.301917, 29.837511], [-103.15451, 28.961047], [-104.332352, 29.391333], [-106.512256, 31.75312], [-108.279289, 31.785138], [-108.20984, 31.325059], [-111.059223, 31.266025]]],
                },
                "Pacific Coast": {
                    polygon: [[[-105.755924, 22.508217], [-105.369854, 23.050613], [-104.506652, 22.369306], [-103.839519, 22.747833], [-103.877432, 22.186207], [-103.632717, 22.56555], [-103.642195, 22.135438], [-103.053672, 22.387946], [-103.715222, 21.434101], [-103.388001, 21.04926], [-102.64976, 21.823607], [-101.494039, 21.902339], [-102.024719, 20.352122], [-100.957133, 19.931092], [-100.450805, 19.99398], [-100.335614, 20.277807], [-100.096374, 19.878004], [-100.57786, 18.869378], [-100.293884, 18.386432], [-99.624552, 18.717698], [-98.427876, 17.902129], [-98.060729, 16.888632], [-98.550516, 16.313009], [-102.825988, 17.832128], [-105.795877, 20.192941], [-105.781066, 22.328662]]],
                },
                "Bajo": {
                    polygon: [[[-104.506652, 22.369306], [-103.769001, 24.032277], [-103.345244, 24.436475], [-102.479679, 24.433208], [-102.61387, 25.078429], [-101.838551, 24.997271], [-100.777587, 24.496874], [-100.545305, 24.116017], [-100.488804, 23.220106], [-100.119193, 23.234862], [-100.057199, 22.754091], [-98.682338, 22.401187], [-98.352041, 22.20868], [-98.642825, 21.612716], [-98.483169, 21.342103], [-99.328409, 21.091803], [-99.964909, 20.069067], [-100.335614, 20.277807], [-100.450805, 19.99398], [-100.957133, 19.931092], [-102.024719, 20.352122], [-101.494039, 21.902339], [-102.64976, 21.823607], [-103.388001, 21.04926], [-103.715222, 21.434101], [-103.053672, 22.387946], [-103.642195, 22.135438], [-103.632717, 22.56555], [-103.877432, 22.186207], [-103.839519, 22.747833]]],
                },
                "Central Mexico": {
                    polygon: [[[-98.483169, 21.342103], [-99.328409, 21.091803], [-99.964909, 20.069067], [-100.335614, 20.277807], [-100.096374, 19.878004], [-100.57786, 18.869378], [-100.293884, 18.386432], [-99.624552, 18.717698], [-98.427876, 17.902129], [-97.871693, 17.92565], [-97.754964, 18.262437], [-97.506398, 18.024926], [-97.225217, 18.170473], [-96.889104, 18.242874], [-96.733235, 18.377162], [-96.7813, 18.452734], [-96.955365, 18.547153], [-97.07673, 18.464132], [-97.143163, 18.599874], [-97.353963, 18.710471], [-97.240666, 19.117102], [-97.060422, 19.154078], [-97.017506, 19.26366], [-97.409581, 19.518852], [-97.291993, 19.806269], [-97.235946, 19.975598], [-97.135953, 20.129275], [-97.429408, 20.217735], [-97.561029, 20.098245], [-97.714623, 20.179876], [-97.744621, 20.405687], [-97.549399, 20.507738], [-97.705847, 20.592165], [-97.735952, 20.82038], [-97.889654, 20.817371], [-98.004956, 20.486895], [-98.057115, 20.676416], [-98.484195, 20.328738], [-98.574485, 20.452862], [-98.456036, 20.823536], [-98.366598, 20.887975], [-98.249695, 20.777868], [-98.157511, 21.078291], [-98.277288, 21.176355], [-98.402557, 21.146327], [-98.5295, 21.257852]]],
                },
                "Veracruz": {
                    polygon: [[[-97.732991, 22.270502], [-96.957425, 20.693328], [-95.478734, 18.995736], [-94.147328, 18.240266], [-94.076456, 18.035003], [-94.082488, 17.881786], [-93.935251, 17.758149], [-93.613311, 17.542049], [-93.700021, 17.387123], [-93.604277, 17.313022], [-93.868722, 17.143734], [-94.913968, 17.193429], [-94.899033, 17.316545], [-95.07284, 17.367587], [-95.247635, 17.613133], [-95.181223, 17.675603], [-95.230168, 17.743282], [-95.680951, 17.509986], [-95.900849, 17.741484], [-95.826777, 18.115744], [-96.12624, 18.134587], [-96.465443, 18.563426], [-96.67281, 18.65323], [-96.733235, 18.377162], [-96.7813, 18.452734], [-96.955365, 18.547153], [-97.07673, 18.464132], [-97.143163, 18.599874], [-97.353963, 18.710471], [-97.240666, 19.117102], [-97.060422, 19.154078], [-97.017506, 19.26366], [-97.409581, 19.518852], [-97.291993, 19.806269], [-97.235946, 19.975598], [-97.135953, 20.129275], [-97.429408, 20.217735], [-97.561029, 20.098245], [-97.714623, 20.179876], [-97.744621, 20.405687], [-97.549399, 20.507738], [-97.705847, 20.592165], [-97.735952, 20.82038], [-97.889654, 20.817371], [-98.004956, 20.486895], [-98.057115, 20.676416], [-98.484195, 20.328738], [-98.574485, 20.452862], [-98.456036, 20.823536], [-98.366598, 20.887975], [-98.249695, 20.777868], [-98.157511, 21.078291], [-98.277288, 21.176355], [-98.402557, 21.146327], [-98.5295, 21.257852], [-98.483169, 21.342103], [-98.642825, 21.612716], [-98.352041, 22.20868], [-98.682338, 22.401187], [-98.231114, 22.447962], [-97.845808, 22.220389]]],
                },
                "Oaxaca": {
                    polygon: [[[-98.550516, 16.313009], [-98.060729, 16.888632], [-98.427876, 17.902129], [-97.871693, 17.92565], [-97.754964, 18.262437], [-97.506398, 18.024926], [-97.225217, 18.170473], [-96.889104, 18.242874], [-96.733235, 18.377162], [-96.733235, 18.377162], [-96.67281, 18.65323], [-96.465443, 18.563426], [-96.12624, 18.134587], [-95.826777, 18.115744], [-95.900849, 17.741484], [-95.680951, 17.509986], [-95.230168, 17.743282], [-95.181223, 17.675603], [-95.247635, 17.613133], [-95.07284, 17.367587], [-94.899033, 17.316545], [-94.913968, 17.193429], [-93.868722, 17.143734], [-94.114198, 16.508178], [-94.052056, 16.039535], [-94.927529, 16.030296], [-96.469735, 15.546636], [-98.58735, 16.143775]]],
                },
                "Chiapas & Tobasco": {
                    polygon: [[[-94.052056, 16.039535], [-94.114198, 16.508178], [-93.868722, 17.143734], [-93.604277, 17.313022], [-93.700021, 17.387123], [-93.613311, 17.542049], [-93.935251, 17.758149], [-94.082488, 17.881786], [-94.076456, 18.035003], [-94.147328, 18.240266], [-93.404378, 18.482693], [-92.494572, 18.69226], [-92.40887, 18.477565], [-92.180346, 18.460713], [-92.140778, 18.145353], [-91.655148, 17.879259], [-91.577686, 18.16403], [-91.006118, 17.935572], [-90.986956, 17.81537], [-90.983309, 17.258932], [-91.43319, 17.251145], [-91.130787, 16.988698], [-90.762466, 16.746925], [-90.646831, 16.504845], [-90.388373, 16.378441], [-90.44824, 16.083167], [-91.708642, 16.07793], [-92.217994, 15.260806], [-92.060682, 15.05271], [-92.155937, 14.910433], [-92.218232, 14.523588], [-93.088023, 15.299573], [-93.804005, 15.872012]]],
                },
                "Yucatan Peninsula": {
                    polygon: [[[-92.494572, 18.69226], [-92.40887, 18.477565], [-92.180346, 18.460713], [-92.140778, 18.145353], [-91.655148, 17.879259], [-91.577686, 18.16403], [-91.006118, 17.935572], [-90.986956, 17.81537], [-89.154986, 17.8206], [-89.156359, 17.980031], [-88.860415, 17.913401], [-88.487223, 18.490671], [-88.270329, 18.499299], [-87.855681, 18.184662], [-87.391594, 19.316805], [-86.945317, 20.220555], [-86.639782, 20.624221], [-86.877028, 21.655086], [-88.627121, 21.632639], [-90.364595, 21.1201], [-90.56825, 20.452219], [-90.508234, 19.91576], [-90.761328, 19.677753], [-90.772518, 19.341069], [-91.755897, 18.725656]]],
                },
            },
            "BRAZIL": {
                "SW (example of an easy region in Brazil)": {
                    polygon: [[[-60.559372, -13.7795], [-60.077217, -16.351536], [-58.452484, -16.208838], [-57.488175, -17.857308], [-57.844711, -21.925305], [-55.608475, -22.432703], [-53.460129, -26.843768], [-57.522995, -30.007362], [-52.59697, -32.810447], [-49.995896, -29.826436], [-48.924607, -13.864845]]],
                },
                "NW (example of an easy region in Brazil)": {
                    polygon: [[[-60.559372, -13.7795], [-64.346101, -12.387248], [-65.584001, -9.777228], [-69.063113, -10.964804], [-72.014881, -9.991383], [-73.890312, -7.554797], [-72.543517, -4.924614], [-69.937818, -4.380317], [-69.309658, -1.245621], [-69.999857, -0.128332], [-69.754279, 1.359243], [-67.487217, 1.967781], [-65.626, 0.711932], [-63.309815, 2.241911], [-64.566116, 3.98198], [-62.447685, 3.645584], [-60.065582, 5.062117], [-60.04747, 3.074594], [-58.832443, 1.169861], [-52.798874, 2.191137], [-51.366501, 4.406559], [-49.292771, -0.203348], [-48.924607, -13.864845]]],
                },
                "NE (example of an easy region in Brazil)": {
                    polygon: [[[-48.924607, -13.864845], [-48.924607, -13.864845], [-49.292771, -0.203348], [-39.954392, -2.795013], [-35.285202, -5.534079], [-35.45549, -9.291986], [-38.877732, -13.7795]]],
                },
                "SE (example of an easy region in Brazil)": {
                    polygon: [[[-48.924607, -13.864845], [-49.995896, -29.826436], [-48.523728, -25.448326], [-41.415574, -22.426356], [-39.443528, -18.490125], [-38.877732, -13.7795]]],
                },
            }
        }
    };

})();
